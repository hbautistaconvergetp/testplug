(window.favoriteDashboards_bundle_jsonpfunction=window.favoriteDashboards_bundle_jsonpfunction||[]).push([[3],{253:function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return p}));var i=a(4),s=a.n(i),n=a(14),o=a.n(n),d=a(10),r=a(32),l=a(3),c=a(1);const u=({users:e})=>{const t=[{field:"label",name:"Name",truncateText:!0,mobileOptions:{show:!0},render:(e,t)=>Object(c.jsx)(l.EuiLink,{href:t.url,target:"_blank"},e)},{field:"description",name:"Description",truncateText:!0,mobileOptions:{show:!0}},{field:"updatedAt",name:"Updated Date",dataType:"date"}];return Object(c.jsx)(l.EuiBasicTable,{tableCaption:"Demo of EuiBasicTable",items:e,rowHeader:"firstName",columns:t})};var b=a(35);const j=({basename:e,http:t,navigation:a,SavedObjectsClient:n,data:o})=>{const[j,p]=Object(i.useState)(),[f,x]=Object(i.useState)({}),[O,h]=Object(i.useState)(),[g,m]=Object(i.useState)(),[v,y]=Object(i.useState)([]),S="favorite.dashboards",[E,w]=Object(i.useState)([]),[C,N]=Object(i.useState)([]);return Object(i.useEffect)((()=>{(async()=>{await t.post("/api/create_index",{query:{index:S}}).then((e=>{h(e)}));const e=(await(async e=>await e.find({type:"dashboard"}))(n)).savedObjects.map((e=>({id:e.id,title:e.attributes.title,label:e.attributes.title,description:e.attributes.description,updatedAt:e.updatedAt,url:"https://df-us-01.convergetp.com/app/dashboards#/view/"+e.id})));for(let a of e){let e=JSON.stringify({dsdocument:JSON.stringify(a)});await t.post("/api/putdocindex",{query:{index:S},body:e})}for(let a of e){let e=JSON.stringify({dsdocument:JSON.stringify(a)});t.post("/api/putdocindex",{query:{index:S},body:e}).then((e=>{h(e)}))}const a=(await t.post("/api/get_favorites",{query:{index:S}})).values.map((e=>({id:e._source.id,isChecked:e._source.isChecked}))),i=function(e,t){const a=new Set(e.map((e=>e.id)));return t.filter((e=>!a.has(e.id)))}(e,a);for(let e of i){let a=e.id;t.post("/api/deletdashboard",{query:{index:S,id:a}}).then((e=>{h(e)}))}const s=a.filter((e=>!0===e.isChecked));p(e);const o=s.map((e=>e.id));w(o);const d=e.filter((e=>o.includes(e.id)));return console.log(d),d})().then((e=>y(e)))}),[]),Object(c.jsx)(r.BrowserRouter,{basename:e},Object(c.jsx)(d.I18nProvider,null,Object(c.jsx)(s.a.Fragment,null,Object(c.jsx)(a.ui.TopNavMenu,{appName:b.a,useDefaultBehaviors:!0}),Object(c.jsx)(l.EuiPage,{restrictWidth:"1000px"},Object(c.jsx)(l.EuiPageBody,null,Object(c.jsx)(l.EuiPageHeader,null,Object(c.jsx)(l.EuiTitle,{size:"l"},Object(c.jsx)("h1",null,Object(c.jsx)(d.FormattedMessage,{id:"favoriteDashboards.helloWorldText",defaultMessage:"Favorite Dashboards"})))),Object(c.jsx)(l.EuiPageContent,null,Object(c.jsx)(l.EuiPageContentHeader,null),Object(c.jsx)(l.EuiPageContentBody,null,Object(c.jsx)(l.EuiCollapsibleNavGroup,{background:"light",title:"Set favorites",isCollapsible:!0,iconType:"logoKibana",initialIsOpen:!1},Object(c.jsx)(l.EuiText,{size:"s",color:"subdued"},Object(c.jsx)("p",null,"Select your favorites dashboards"),Object(c.jsx)(l.EuiCheckboxGroup,{options:j,idToSelectedMap:E.reduce(((e,t)=>({...e,[t]:!0})),{}),onChange:e=>{return t=e,void(E.includes(t)?(w(E.filter((e=>e!==t))),N([...C,t])):(N(C.filter((e=>e!==t))),w([...E,t])));var t},compressed:!0})),Object(c.jsx)(l.EuiFlexGroup,{justifyContent:"center",alignItems:"center",gutterSize:"m"},Object(c.jsx)(l.EuiFlexItem,{grow:!1},Object(c.jsx)(l.EuiButton,{size:"s",fill:!0,onClick:()=>(()=>{console.log(E);for(let e of E)t.post("/api/stateindex",{query:{index:S,id:e,state:!0}});console.log("indate data"),location.reload(),console.log(C);for(let e of C)t.post("/api/stateindex",{query:{index:S,id:e,state:!1}});console.log("indate data"),location.reload()})()},"Update ")))),Object(c.jsx)("pre",null,JSON.stringify(g,null,2)),Object(c.jsx)(l.EuiSpacer,null),Object(c.jsx)(u,{users:v}))))))))},p=({notifications:e,http:t,savedObjects:a},{navigation:i,data:s},{appBasePath:n,element:d})=>(o.a.render(Object(c.jsx)(j,{basename:n,notifications:e,http:t,navigation:i,SavedObjectsClient:a.client,data:s}),d),()=>o.a.unmountComponentAtNode(d))}}]);